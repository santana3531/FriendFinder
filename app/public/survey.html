<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>LegoFriendFinder</title>

  <!-- Bootstrap CDN -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>
<body>
	<div class="container">
	<h2>Homie Questionaire</h2>
	<hr>
	<hr>
	<h3><strong>Tell us what kinda homie you are.</strong> Fill out the questions based on a 1-5 rating. 1 being Strong Disagree, 5 being Strongly Agree. (Don't screw up or you'll have no friends.)</h3>
	
	<h4><strong>Name </strong>(Required)</h4>
	<input type="text" id="name" class="homie-form" required>
	
<!-- 	<h4><strong>Photo</strong> (Required)</h4>
	<input type="text" id="photo" class="homie-form" required> -->

	<hr>

	<h3><strong>Question 1</strong></h3>
	<h4> Legos are toys.</h4>
	<select class="chosen-select" id="Q1">
	  <option value=""></option>	
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 2</strong></h3>
	<h4> Legos are a highly sophisticated inter-locking brick system.</h4>
	<select class="chosen-select" id="Q2">
		<option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>
	
	<h3><strong>Question 3</strong></h3>
	<h4> Build Spaceships > Vehicles.</h4>
	<select class="chosen-select" id="Q3">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 4</strong></h3>
	<h4> Brick by Brick > Piece by Piece</h4>
	<select class="chosen-select" id="Q4">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 5</strong></h3>
	<h4> You would walk barefoot over legos.</h4>
	<select class="chosen-select" id="Q5">
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 6</strong></h3>
	<h4> Legoland > Disneyland</h4>
	<select class="chosen-select" id="Q6">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 7</strong></h3>
	<h4> Lego candy are still usable Legos</h4>
	<select class="chosen-select" id="Q7">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 8</strong></h3>
	<h4> Pancakes > Waffles.</h4>
	<select class="chosen-select" id="Q8">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 9</strong></h3>
	<h4> Lego builders are the same as architects.</h4>
	<select class="chosen-select" id="Q9">
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>

	<h3><strong>Question 10</strong></h3>
	<h4> Legos are the greatest invention, ever!.</h4>
	<select class="chosen-select" id="Q10">
	  <option value=""></option>
	  <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
	</select>
	<br>
	<br>

	<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
<br>
<br>
<br>
</div>

<!-- Show match using a modal -->
<div id="homie-results" class="modal fade" role="dialog">
	<div class="modal-dialog">

<!-- Homie Match Info -->
		<div class="modal-content">
			<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h2 class="modal-top"><strong>Your New BFF is..</strong></h2>
		</div>
	
		<div class="modal-body">
			<h2 id="homie-name"></h2>
			<img id="homie-pic" src="" alt="">
		</div>
	</div>
</div>
</div>
<!-- Write javascript for the questionaire and modal -->

	<script type="text/javascript">
	var config = {
		".chosen-select": {},
		".chosen-select-deselect": {
			allow_single_deselect: true
		},
		".chosen-select-no-select": {
			disable_search_threshold: 10
		},
		".chosen-select-no-results": {
			no_results_text: "Gotta pick one."
		},
		".chosen-select-width": {
			width: "95%"
		}
	};

	for (var selector in config) {
		$(selector).chosen(config[selector]);
	}

	// grab the answers picked when submit is clicked
	$("#submit").on("click", function(event) {
		event.preventDefault();


		// Validate form
		function validateForm() {
			var isValid = true;
			$(".homie-form").each(function() {
				if ($(this).val() === "") {
					isValid = false;
				}
			});

		$(".chosen-select").each(function() {
			if ($(this).val() === "") {
				isValid = false;
			}
		});
		return isValid;
		}

	
	// if every question is answered 
	if (validateForm()) {

		var homieData = {
			name: $("#name").val(),
			photo: $("#photo").val(),
			pts: [
				$("#Q1").val(),
				$("#Q2").val(),
				$("#Q3").val(),
				$("#Q4").val(),
				$("#Q5").val(),
				$("#Q6").val(),
				$("#Q7").val(),
				$("#Q8").val(),
				$("#Q9").val(),
				$("#Q10").val()
			]
		};

	// make posts to homie API
	$.post("/api/homies", homieData, function(data) {


		$("#homie-name").text(data.name);
		$("#homie-pic").attr("src", data.photo);

	// show newBff in modal
	$("#homie-results").modal("toggle");
	});
  } else {
  	alert("Fill out every question or you'll never have any friends, ever!");
  }
	});
	</script>







</body>
</html>